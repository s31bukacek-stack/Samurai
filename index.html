<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Samurai Runner</title>

  <!-- externí stylesheet ve struktuře /src/styles -->
  <link rel="stylesheet" href="./styles/main.css" />
</head>
<body>
  <div id="loading">Načítání hry... Pokud se hra nezobrazí, zkontrolujte konzoli (F12)</div>
  <div id="error"></div>
  <canvas id="gameCanvas" width="640" height="390"></canvas>
  <div id="debug"></div>

  <script>
    function showError(message) {
      document.getElementById('error').innerHTML = message;
      console.error(message);
    }
  </script>

  <!-- Skripty přesunuté do /src/scripts -->
  <script src="./scripts/config.js"></script>
  <script src="./scripts/physics.js"></script>
  <script src="./scripts/assets.js"></script>
  <script src="./scripts/animations.js"></script>
  <script src="./scripts/player.js"></script>
  <script src="./scripts/input.js"></script>
  <script src="./scripts/renderer.js"></script>
  <script src="./scripts/parallax.js"></script>
  <script src="./scripts/game.js"></script>
  <!-- Efekt padajících listů -->
  <script src="./scripts/leafeffect.js"></script>

  <!-- Inicializace hry po načtení všech souborů -->
  <script>
    window.addEventListener('load', async () => {
      try {
        document.getElementById('loading').textContent = "Inicializace hry...";
        console.log("Inicializace hry...");

        if (typeof GAME === 'undefined') {
          throw new Error("Objekt GAME nebyl nalezen. Zkontrolujte, zda je správně definován v souboru ./scripts/game.js");
        }

        await GAME.initialize();

        document.getElementById('loading').textContent = "Hra byla spuštěna!";
        setTimeout(() => {
          document.getElementById('loading').style.display = 'none';
        }, 2000);
      } catch (error) {
        console.error("Chyba při spuštění hry:", error);
        showError(`<p>Chyba při spuštění hry:</p><p>${error.message}</p>`);
      }
    });
  </script>
</body>
</html>

